# ТЗ

## Начало игры

- Бот по команде `/start` **в группе** приветствует участников и просит написать ему команду “/start” в лс для тех, кто еще этого не сделал.
- Бот по команде `/start` **в личке** добавляет пользователя в БД.

- Запуск игры командой `/start_game`, подтверждение участия пользователей (минимум 6 человек) в течение 30 секунд.
- Проверка наличия всех участников в БД.
- Распределение ролей (мирный житель, мафия, комиссар, доктор, маньяк).
- Запись ролей игроков и их составляющих в новую таблицу.
    - Все, кроме мирных жителей **по очереди** получают списки для выбора действий в личных сообщениях с ботом.
    - Мафия узнает имена сокомандников.

## Ночная фаза

- **Мафия**
    - Мафия получает список (в виде кнопок) с именами игроков, которых можно убить (все, кроме мафии и убитых)
    - Участники мафии могут обсудить через бота, кого они хотят убить и выбрать жертву.
    - Лимит по времени - 1 минута.
- **Комиссар**
    - Комиссар получает список (текстом) проверенных им игроков (если такие есть) и их роли.
    - Бот отправляет ему список (в виде кнопок) живых непроверенных игроков.
    - Комиссар выбирает, кого хочет проверить.
    - Бот дает обобщающий ответ (мафия или не мафия).
    - Лимит по времени - 30 секунд.
- **Доктор**
    - Доктор получает список (в виде кнопок) живых игроков.
    - Доктор выбирает, кого хочет вылечить.
    - Доктор может вылечить себя только 1 раз за игру.
    - Доктор не может лечить одного и того же игрока 2 раза подряд.
    - Лимит по времени - 30 секунд.

## Дневная фаза

- Объявление результатов ночных действий.
- Общее обсуждение в группе (3 минуты).
- Проведение голосования в группе (30 секунд).
- Объявление роли исключенного игрока по итогам голосования (если кто-то исключен).
- Проверка, не кончилась ли игра, и если нет, начало новой ночной фазы.

## Прочее

- Удаление сообщений неучаствующих или убитых игроков.
- Для сохранения интриги бот продолжает объявлять действия каждой из ролей, даже если она убита (при исключении голосованием этот пункт не учитывается, так как раскрывается роль выбывшего игрока).
- **Возможные исходы игры**
    - **Победа мафии** - количество мафии равно количеству игроков.
    - **Победа мирных жителей -** больше нет мафии.
